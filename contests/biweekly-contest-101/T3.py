# -*- coding: utf-8 -*-

"""
@File    : T3.py
@Author  : wenhao
@Time    : 2023/4/1 22:21
@LC      : 
"""

"""
æ•°è®ºçŸ¥è¯† ğŸ˜

1. æ¯ä¸ªé•¿åº¦ä¸º k çš„å­æ•°ç»„çš„å…ƒç´ æ€»å’Œéƒ½ç›¸ç­‰
  a[i] + a[i+1] + ... + a[i+k-1]
= a[i+1] + a[i+2] + ... + a[i+k]

==> a[i] = a[i+k]
==> a[0] = a[k] = a[2*k] = ...
    a[1] = a[1 + k] = a[1 + 2*k] = ...
    ...

å¦‚æœä¸æ˜¯å¾ªç¯æ•°ç»„ï¼Œé‚£ä¹ˆ a[0] è¿™ä¸€ç»„å’Œ a[1] è¿™ä¸€ç»„æ˜¯äº’ä¸ç›¸å¹²çš„
è®©ä¸€ç»„å…ƒç´ ç›¸åŒï¼Œæœ€å°‘éœ€è¦æ“ä½œå¤šå°‘æ¬¡
ç­”æ¡ˆï¼šå–æ‰€æœ‰æ•°åˆ°è¿™ä¸ªç»„çš„ä¸­ä½æ•°æ˜¯æœ€ä¼˜çš„ï¼Œè·ç¦»ä¹‹å’Œæœ€å°

å‰©ä½™å¤„ç†å¯ä»¥ç”¨ vis æ•°ç»„æš´åŠ› ä¹Ÿå¯ä»¥å¹¶æŸ¥é›† çµç¥ä½¿ç”¨æ•°è®ºå·¥å…·ğŸ‘

a æœ‰ä¸€ä¸ªå‘¨æœŸ n
a æœ‰ä¸€ä¸ªå‘¨æœŸ k
åˆ™ a è¿˜æœ‰ä¸€ä¸ªå‘¨æœŸ gcd(n, k)  æœ€å°æ­£å‘¨æœŸ
è¯æ˜ï¼ša[i] = a[i + k*x] = a[i + k*x + n*y] = a[i + gcd(n, k)]  
è£´èœ€å®šç† k*x + n*y = gcd(n, k)  è¿™æ˜¯å¯ä»¥æ„é€ çš„ ğŸ˜‚
å¯ä»¥é€šè¿‡è¾—è½¬ç›¸é™¤æ³•ï¼Œæ„é€  x å’Œ y
==> æ•°è®º è£´èœ€å®šç†
"""
from typing import List
from collections import Counter
from math import gcd


class Solution:
    def makeSubKSumEqual(self, arr: List[int], k: int) -> int:
        k = gcd(k, len(arr))
        ans = 0

        for i in range(k):
            b = sorted(arr[i::k])  # æ’åºå¯»æ‰¾ä¸­ä½æ•°
            mid = b[len(b) // 2]
            ans += sum(abs(x - mid) for x in b)  # ä¸­ä½æ•°è·ç¦»ä¹‹å’Œ
        return ans


